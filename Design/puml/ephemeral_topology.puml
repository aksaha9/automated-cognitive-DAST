@startuml
!theme plain
skinparam componentStyle uml2

package "External Triggers" {
    [CLI (gcloud)] as CLI
    [Cloud Scheduler] as Cron
    [GitHub Actions] as CI
}

cloud "Google Cloud Run (Jobs)" {
    component "Ephemeral Job" as Job {
         [Job Runner] as Runner
         [ZAP Engine] as ZAP
    }
}

component "Gemini 1.5" as LLM
component "Cloud Storage" as GCS
node "Target URL" as Target

CLI --> Runner : Start Job (--ai-prompt)
Cron --> Runner : Scheduled Scan
CI --> Runner : CI Pipeline

Runner -> LLM : Configure Checks
Runner -> ZAP : Start Scan
ZAP -> Target : Attack
Runner -> ZAP : Poll Status
Runner -> GCS : Save Report (SARIF)
@enduml
